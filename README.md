## Terraform and Auth0 Setup Guide
We are using Terraform to manage the Auth0 configuration in this project. We have scripts defined in our package.json that help us manage our Terraform workflows for different environments (development, staging, and production).

### Terraform Scripts
Below are the npm scripts that we have added to our `package.json` to simplify our Terraform operations. You need to have Terraform installed on your machine first. You can download it from the [official Terraform website](https://developer.hashicorp.com/terraform/downloads) and follow the installation instructions specific to your operating system.

- `npm run terraform:init`: Initializes your Terraform configuration. It prepares your specified directory for other Terraform operations.

- `npm run terraform:plan`: Generates an execution plan for Terraform. It helps you understand what Terraform will do before actually making any changes.

- `npm run terraform:apply`: Applies the changes required to reach the desired state of the configuration, or the pre-determined set of actions generated by a terraform plan execution plan.

- `npm run terraform:destroy`: Destroys your Terraform-managed infrastructure.

- `npm run terraform:workspace:list`: Lists all your Terraform workspaces.

- `npm run terraform:workspace:create:development`, `npm run terraform:workspace:create:staging`, and `npm run terraform:workspace:create:production`: These commands allow you to create workspace for development, staging, and production environments (just for first time setup).

- `npm run terraform:workspace:development`, `npm run terraform:workspace:staging`, and `npm run terraform:workspace:production`: These commands allow you to switch between your development, staging, and production environments, respectively.

- `npm run terraform:workspace:show`: Displays the current workspace.

### First-time Setup
To get started, perform the following steps:
- Download Terraform binary from the [official Terraform website](https://developer.hashicorp.com/terraform/downloads) and follow the installation instructions specific to your operating system
- Run `aws configure sso` to configure access to terraform s3 bucket, and make sure to name the aws profile as `terraform`. Ask admin for the SSO access.
- Initialize your Terraform configuration using the command `npm run terraform:init`.

- Now, you need to create a `terraform-development.tfvars` file inside `infra/terraform` directory based on the provided example file `terraform-development.tfvars.example`. Do the same for your `staging` and `production` environments.

- Select the appropriate Terraform workspace according to the environment you are working on. For instance, if you are working on the development environment, use the command `npm run terraform:workspace:development`.

- Run `npm run terraform:plan` to ensure your setup is correct. If everything is in order, you should see an execution plan being generated.

- Apply your configuration using `npm run terraform:apply`.

- To tear down your infrastructure when you're done, use `npm run terraform:destroy`.

Remember that Terraform is very powerful, and with these scripts, you're interacting with real environments. Always double-check your actions, especially when applying and destroying configurations.

### Working with Terraform Workspaces and Environments
Terraform Workspaces allow us to manage multiple environments within a single configuration. These environments can include `development`, `staging`, and `production`. By using separate workspaces for each environment, we can manage the state of each independently. This makes it easier to deploy changes to one environment without affecting the others.

Each of these environments (workspaces) could potentially have different settings and resources. For example, you might have a smaller number of servers in your development environment, while your production environment is fully scaled out.

#### Using Different Environments
In our setup, we use different `.tfvars` files for different environments. These files are located inside `infra/terraform` directory. These files contain the variable definitions for each workspace. For instance, `terraform-development.tfvars` contains the variables for the development workspace, `terraform-staging.tfvars` for staging, and `terraform-production.tfvars` for production.

These variable files allow us to customize the behavior of our Terraform configuration in each workspace. By changing the variable values, we can alter the number of servers, change their types, or adjust any other settings that our configuration supports.

When you switch workspaces, using `npm run terraform:workspace:<environment>`, Terraform will use the appropriate .tfvars file for that environment. This allows you to manage and apply infrastructure changes to the respective environment.

#### Initial Setup per Environment
When setting up an environment for the first time, create a `.tfvars` file based on the corresponding example file inside `infra/terraform` directory. For instance, if you're setting up the development environment, create a `terraform-development.tfvars` file based on the terraform-development.tfvars.example file. Repeat this process for the staging and production environments.